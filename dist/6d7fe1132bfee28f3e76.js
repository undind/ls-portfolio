(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{414:function(e,t,r){"use strict";r.d(t,"b",function(){return a}),r.d(t,"a",function(){return i});var n=r(355),a=function(e){var t=new FileReader;return new Promise(function(r){try{t.readAsDataURL(e),t.onloadend=function(){r(t.result)}}catch(e){throw new Error("Ошибка при чтении файла")}})},i=function(e){var t=n.a.defaults.baseURL;return"".concat(t,"/").concat(e)}},440:function(e,t,r){},468:function(e,t,r){"use strict";var n=r(440);r.n(n).a},488:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"avatar-upload"},[r("label",{staticClass:"avatar-upload__control",attrs:{for:"file-input"}},[e.renderedPhoto?r("img",{staticClass:"avatar-upload__image",attrs:{src:e.renderedPhoto}}):e._e()]),r("input",{ref:"file-input",staticClass:"avatar-upload__file",attrs:{id:"file-input",type:"file",accept:"image/jpeg,image/png"},on:{change:e.handlePhotoUpload}}),r("button",{staticClass:"my-reviews__edit-link",on:{click:function(t){return t.preventDefault(),e.uploadFile(t)}}},[e._v(e._s(e.value?"Изменить фото":"Добавить фото"))]),r("transition",{attrs:{name:"slide-up"}},[e.errorMessage?r("div",{staticClass:"avatar-upload__error"},[r("error-tooltip",[e._v(e._s(e.errorMessage))])],1):e._e()])],1)};n._withStripped=!0;var a=r(414);function i(e,t,r,n,a,i,o){try{var u=e[i](o),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,a)}function o(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function u(e){i(o,n,a,u,s,"next",e)}function s(e){i(o,n,a,u,s,"throw",e)}u(void 0)})}}var u={components:{ErrorTooltip:function(){return r.e(3).then(r.bind(null,497))}},props:{value:{type:File|String,default:null},maxSize:{type:Number,default:15e5},errorMessage:{type:String,default:""}},watch:{value:function(e){this.setRenderedPhoto()}},data:function(){return{renderedPhoto:null}},methods:{uploadFile:function(){this.$refs["file-input"].click()},setRenderedPhoto:function(){"string"==typeof this.value?this.renderedPhoto=Object(a.a)(this.value):this.value?this.renderPhoto(this.value):this.renderedPhoto=null},renderPhoto:function(){var e=o(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(a.b)(t);case 3:r=e.sent,this.renderedPhoto=r,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.message),this.$emit("input",null);case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),handlePhotoUpload:function(){var e=o(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=t.target.files[0]).size>this.maxSize)){e.next=4;break}return alert("Слишком большой размер файла (максимум 1.5MB)"),e.abrupt("return");case 4:this.$emit("input",r);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},created:function(){this.setRenderedPhoto()}},s=(r(468),r(31)),c=Object(s.a)(u,n,[],!1,null,"18e1ac2c",null);c.options.__file="src/admin/components/AvatarUpload.vue";t.default=c.exports}}]);